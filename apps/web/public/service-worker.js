var u=Object.defineProperty;var f=(s,e,t)=>e in s?u(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>(f(s,typeof e!="symbol"?e+"":e,t),t);var r=[".well-known/security.txt","apple-touch-icon.png","assets/type-bold.svg","assets/type-code.svg","assets/type-italic.svg","favicon-16x16.png","favicon-32x32.png","favicon.ico","fonts/SofiaProSoftBold-webfont.woff2","fonts/SofiaProSoftMed-webfont.woff2","fonts/SofiaProSoftReg-webfont.woff2","icon-128x128.png","icon-512x512.png","lens.svg","logo.png","pride.png","robots.txt"];var w="0.0.1",n=class{constructor({cachePrefix:e,staticAssets:t,cacheableRoutes:a,withQueryParams:i}){c(this,"cacheName");c(this,"cachePrefix");c(this,"staticAssets");c(this,"cacheableRoutes");c(this,"withQueryParams");c(this,"cacheStaticAsset",(e,t)=>{fetch(e).then(a=>{if([200,304].includes(a.status))t.put(e,a).catch(i=>{console.debug(`Failed to cache file - ${e}`,i),console.debug(`Failed to cache file - ${e}`,i)});else throw new Error("Failed to fetch from local")}).catch(console.debug)});c(this,"cacheStaticAssets",async()=>{let e=await caches.open(this.cacheName);for(let t of this.staticAssets)this.cacheStaticAsset(t,e)});c(this,"invalidatePreviousCache",async()=>{let e=await caches.keys();await Promise.all(e.filter(t=>t.startsWith(this.cachePrefix)).map(async t=>t!==this.cacheName?await caches.delete(t):await Promise.resolve(!1)))});c(this,"put",async(e,t)=>{let a=await fetch(e,{cache:"reload"});!a.redirected&&[200,304].includes(a.status)?await t.put(e,a):await t.delete(e)});c(this,"get",async e=>{let{request:t}=e,{pathname:a,search:i}=new URL(t.url),o=`${a}${this.withQueryParams?i:""}`;if(console.log(">>> pathname",a,o),(this.staticAssets.has(a)||this.cacheableRoutes.has(a))&&(console.log(">>> cacheName",this.cacheName),this.cacheName)){let l=await caches.open(this.cacheName),d=await l.match(o);if(console.log(">>> navigator",navigator.onLine),navigator.onLine&&e.waitUntil(this.put(o,l)),d)return d}return console.log(">>> fetch",fetch),await fetch(t)});this.cachePrefix=e,this.cacheName=`${e}_${w}`,this.staticAssets=new Set(t),this.cacheableRoutes=new Set(a),this.withQueryParams=i??!0}};var v=r??[],h=new n({cachePrefix:"SWCache",cacheableRoutes:["/","/explore","/contact"],staticAssets:v});async function m(){self.skipWaiting(),await h.cacheStaticAssets(),console.debug("Service Worker Installed")}var p=async()=>{await self.clients.claim(),await h.invalidatePreviousCache(),console.debug("Service Worker Activated")},S=s=>{let e=s.request.clone(),{origin:t}=new URL(e.url);if(self.location.origin===t)s.respondWith(h.get(s));else return};self.addEventListener("fetch",S);self.addEventListener("install",s=>s.waitUntil(m()));self.addEventListener("activate",s=>s.waitUntil(p()));
